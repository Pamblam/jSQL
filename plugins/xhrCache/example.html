<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
	<head>
		<title>xhrCache Example</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>
	<body>
		<script src="../../jSQL.min.js"></script>
		<script src="./jSQL.xhrCache.js"></script>
		<script>
			jSQL.load(function(){
				
				function loadDoc(cb) {
					var xhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
					xhttp.onreadystatechange = function() {
					  if (this.readyState == 4 && this.status == 200) cb(this.responseText);
					};
					xhttp.open("GET", "ajaxtext.txt", true);
					xhttp.send();
				}
				
				(function recurse(i){
					loadDoc(function(resp){
						print(resp);
						setTimeout(function(){
							if(i<3) recurse(++i);
						}, 1500);
					});
				})(0);
				
				function print(str){
					document.getElementsByTagName("body")[0].innerHTML += str+"<br>";
				}
				
			});
		</script>
	</body>
</html>
